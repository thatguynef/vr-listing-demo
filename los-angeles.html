<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Los Angeles Listing</title>
</head>
<body>
    <h1>Los Angeles Listing</h1>
    <script type="module">
      import Typebot from 'https://cdn.jsdelivr.net/npm/@typebot.io/js@0.0/dist/web.js'
    
      Typebot.initBubble({
        typebot: "vr-listing-demo-711ammo",
        prefilledVariables: {
          "filename": getFilenameFromUrl(),
          "page_title": formatCurrentTitle()
        },
        theme: {
          button: { backgroundColor: "#0042DA", iconColor: "#FFFFFF" },
          previewMessage: { backgroundColor: "#ffffff", textColor: "black" },
          chatWindow: { backgroundColor: "#ffffff" }
        },
      });
  
      function getFilenameFromUrl() {
        const path = window.location.pathname;
        const filenameWithExtension = path.substring(path.lastIndexOf('/')+1);
        const filename = filenameWithExtension.replace('.html', '');
        return filename;
      }
  
      function formatCurrentTitle() {
        const path = window.location.pathname;
        const filename = path.substring(path.lastIndexOf('/') + 1);
      
        const words = filename.replace(/-/g, ' ').replace('.html', '').split(' ');
        const capitalizedWords = words.map(word => word.charAt(0).toUpperCase() + word.slice(1));
        const formattedTitle = capitalizedWords.join(' ');
      
        return formattedTitle;
      }
    </script>
</body>
</html>